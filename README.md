# Shopping mall R E U Y

쇼핑몰 기능 웹사이트 프로젝트 입니다.

## 소개

#### start

```
npm install
npm start
```

#### 개발 일자 : 01/02/2023 ~ 08/02/2023

#### 사용한 기술 스택

- react

- react Query

- tailwind CSS

## 구현 기능

#### 1. 로그인 / 로그아웃

![로그인로그아웃](https://user-images.githubusercontent.com/108039645/223312758-24fe54d5-91c3-45df-85a2-c1467e46ecf8.gif)

- firebase의 initializeapp, googleAuthProvider로 앱을 초기화한 후, Authentication 기능 중 web 구글 로그인 기능을 사용하여 signInWithPopup 함수를 생성하여 로그인 기능을 만들었습니다.

- user의 상태를 관리하는 useState를 사용하여 로그인 권한을 확인하면 로그아웃 버튼을 띄웠습니다.

- onAuthStateChanged함수를 사용하여 로그인된 사용자의 정보를 보관하였고, useEffect를 사용하여 무분별한 리렌더링을 방지함과 동시에 페이지 리로딩 시에도 사용자 정보를 저장할 수 있도록 구현하였습니다.

- 비즈니스 로직과 UI 기능을 분리하여 작성하였습니다.

#### 2. 어드민 사용자 권한과 경로 보호
![경로보호](https://user-images.githubusercontent.com/108039645/223313031-8635f337-93b0-4740-bb98-c3205c7d86cc.gif)

- 사용자를 어드민 배열에 있는지 확인하는 함수를 만들어서 uid가 어드민인 경우에만 제품 등록 아이콘을 보여주었습니다. database에서 admin 사용자를 가져오는 함수를 만들어 사용했습니다.

- 받아온 user의 객체에 isAdmin 속성을 추가하도록 만들었습니다. isAdmin이 true인 경우에 제품 등록 페이지에 접근하고, false라면 홈으로 리다이렉팅하도록 구현하였습니다.

- url에 직접 경로를 입력하여 접근할 경우를 대비해 권한을 확인하는 컴포넌트로 감싸서 권한을 확인한 후 이동할 수 있도록 경로를 보호하였습니다.

#### 3. 새 제품 등록
![제품등록](https://user-images.githubusercontent.com/108039645/223313149-d8144d15-80bc-4d12-a808-21ae8d6590d7.gif)

- form 태그를 사용하여 등록한 이미지를 cloudinary에 등록하여 url을 생성한 후, fetch API로 제품을 등록하는 함수를 구현했습니다.

- uuid를 사용하여 고유한 아이디에 새제품을 등록하는 함수를 만들고 firebase에 데이터를 추가하도록 만들었습니다.

- 등록 버튼 클릭하고 성공적으로 데이터가 전달되면 완료 메시지를 띄우도록 구현했습니다.

#### 4. 제품 보여주기

- useQuery를 사용하여 제품의 정보를 가져와 map 메서드를 활용하여 목록을 보여주었습니다.

- url을 동적으로 라우팅하고 제품의 데이터를 전달하여 상세페이지를 구현하였습니다.

#### 5. 장바구니 추가 기능
![장바구니에 추가](https://user-images.githubusercontent.com/108039645/223312705-826b7434-37d0-4b8f-a644-858c34ab1789.gif)

- firebase에서 제품을 읽어오고 추가하고 삭제하는 함수를 생성하였고, 제품을 장바구니에 추가하면 상품 객체 정보를 데이터로 받는 함수를 구현했습니다.
- reduce 메서드를 사용하여 장바구니 제품의 가격을 더하여 수량과 총 금액을 보여주도록 구현하였습니다.
- 장바구니에 담긴 개수만큼 숫자를 보여주도록 아이콘을 만들었습니다.

## 보완점

- 로그인 기능을 firebase로 해결하다보니 인증 인가에 대해서 편리하게 다루어진 것 같아 로그인 과정에 대해 따로 공부하는 것이 필요하다고 생각했습니다.
- 동일한 상품의 다른 사이즈를 장바구니에 담으면 이전에 담은 상품은 사라지고 새로운 사이즈로 업데이트되는 문제를 발견했습니다.
- 메뉴 모달을 사용하는 기능을 추가로 구현하는 중에 있습니다.

## 파일 구조

```
📦 src
┣ 📂 api
┣ 📂 components
┃ ┣ 📂 ui
┣ 📂 context
┣ 📂 hooks
┣ 📂 pages
```
